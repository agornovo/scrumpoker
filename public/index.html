<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scrum Poker</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-top">
        <h1>ğŸƒ Scrum Poker</h1>
        <button id="theme-toggle" class="btn btn-secondary theme-toggle" type="button" aria-label="Switch theme">Dark theme</button>
        <div class="palette-picker" role="group" aria-label="Color palette">
          <span class="palette-picker-label" aria-hidden="true">Palette:</span>
          <button class="palette-swatch" data-palette="ocean" aria-label="Ocean palette" title="Ocean" aria-pressed="true"></button>
          <button class="palette-swatch" data-palette="forest" aria-label="Forest palette" title="Forest" aria-pressed="false"></button>
          <button class="palette-swatch" data-palette="sunset" aria-label="Sunset palette" title="Sunset" aria-pressed="false"></button>
          <button class="palette-swatch" data-palette="violet" aria-label="Violet palette" title="Violet" aria-pressed="false"></button>
          <button class="palette-swatch" data-palette="rose" aria-label="Rose palette" title="Rose" aria-pressed="false"></button>
          <button class="palette-swatch" data-palette="teal" aria-label="Teal palette" title="Teal" aria-pressed="false"></button>
          <button class="palette-swatch" data-palette="crimson" aria-label="Crimson palette" title="Crimson" aria-pressed="false"></button>
          <button class="palette-swatch" data-palette="slate" aria-label="Slate palette" title="Slate" aria-pressed="false"></button>
        </div>
      </div>
      <p class="subtitle">Planning Poker for Agile Teams</p>
    </header>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen">
      <div class="card welcome-card">
        <h2>Welcome to Scrum Poker</h2>
        <p>Plan and estimate your stories together in real-time</p>
        
        <div class="form-group">
          <label for="user-name">Your Name</label>
          <input type="text" id="user-name" placeholder="Enter your name" required>
        </div>

        <div class="form-group">
          <label for="room-id">Room ID</label>
          <input type="text" id="room-id" placeholder="Enter room ID or leave blank to create">
        </div>

        <div class="form-group checkbox-group">
          <label>
            <input type="checkbox" id="is-observer">
            Join as Observer (won't vote)
          </label>
        </div>

        <div class="form-group">
          <label for="card-set">Card Set <span class="form-hint">(applies when creating a new room)</span></label>
          <select id="card-set">
            <option value="standard">Standard [1, 2, 3, 5, 8, 13, 20, 40, 100, ?]</option>
            <option value="fibonacci">Fibonacci [0, Â½, 1, 2, 3, 5, 8, 13, 21, 34, 55, ?, â˜•]</option>
            <option value="tshirt">T-Shirt Sizes [XS, S, M, L, XL, XXL, ?]</option>
            <option value="powers2">Powers of 2 [1, 2, 4, 8, 16, 32, 64, ?]</option>
          </select>
        </div>

        <div class="form-group checkbox-group">
          <label>
            <input type="checkbox" id="special-effects">
            ğŸ‰ Enable special effects <span class="form-hint">(applies when creating a new room)</span>
          </label>
        </div>

        <button id="join-btn" class="btn btn-primary btn-large">Join Room</button>
        
        <div class="help-text">
          <p>ğŸ’¡ <strong>Tip:</strong> Share the Room ID with your team to collaborate</p>
        </div>
        <section class="help-section" aria-labelledby="help-title">
          <h3 id="help-title">How Scrum Poker helps your team</h3>
          <details>
            <summary>How to use the app</summary>
            <p>Join with your name, share the room ID, pick a card, then reveal together to discuss differences and align.</p>
          </details>
          <details>
            <summary>Purpose of Scrum Poker</summary>
            <p>It gives everyone an equal voice in effort discussions and helps teams find shared understanding before building.</p>
          </details>
          <details>
            <summary>Why Fibonacci numbers</summary>
            <p>Uncertainty grows with size. Fibonacci spacing (1, 2, 3, 5, 8, 13...) reflects that larger work is harder to estimate precisely.</p>
          </details>
          <details>
            <summary>Why estimate with story points</summary>
            <p>Story points measure relative complexity and risk instead of hours, making planning more consistent across different team members.</p>
          </details>
        </section>
      </div>
    </div>

    <!-- Voting Screen -->
    <div id="voting-screen" class="screen hidden">
      <div class="room-info">
        <div class="room-header">
          <div>
            <span class="label">Room ID:</span>
            <span id="current-room-id" class="room-id-display"></span>
            <button id="copy-room-id" class="btn btn-icon" title="Copy to clipboard">ğŸ“‹</button>
          </div>
          <button id="leave-room" class="btn btn-secondary">Leave Room</button>
        </div>
      </div>

    <!-- Story Title -->
      <div class="story-section" id="story-section">
        <span class="label">Current Story</span>
        <input type="text" id="story-title-input" class="story-title-input hidden" placeholder="Enter story title or ticket number..." maxlength="200" aria-label="Story title">
        <div id="story-title-display" class="story-title-display hidden" aria-live="polite"></div>
      </div>

      <!-- Participants -->
      <div class="participants-section">
        <h3>Participants <span id="participant-count" class="count-badge">0</span></h3>
        <div id="participants-list" class="participants-list"></div>
      </div>

      <!-- Card Selection (only shown for non-observers) -->
      <div id="card-selection" class="card-selection">
        <h3>Select Your Card</h3>
        <div class="cards-container" id="cards-container">
        </div>
      </div>

      <!-- Statistics (shown when revealed) -->
      <div id="statistics" class="statistics hidden">
        <h3><span aria-label="Statistics">ğŸ“Š</span> Results</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-label">Average</div>
            <div class="stat-value" id="stat-avg">-</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Median</div>
            <div class="stat-value" id="stat-median">-</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Min</div>
            <div class="stat-value" id="stat-min">-</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Max</div>
            <div class="stat-value" id="stat-max">-</div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <label id="auto-reveal-toggle" class="auto-reveal-toggle hidden">
          <input type="checkbox" id="auto-reveal-checkbox">
          Auto-reveal when all voted
        </label>
        <button id="reveal-btn" class="btn btn-primary">Reveal Cards</button>
        <button id="reset-btn" class="btn btn-secondary">New Round</button>
        <button id="mute-sound-btn" class="btn btn-secondary hidden" aria-label="Mute sound effects" title="Mute sound effects">ğŸ”Š Sounds on</button>
      </div>
    </div>
  </div>

  <footer>
    <p>
      Made with â¤ï¸ for Agile Teams
      <span class="footer-separator">â€¢</span>
      <a id="source-link" href="https://github.com/agornovo/scrumpoker" target="_blank" rel="noopener noreferrer" class="footer-link">Source Code</a>
    </p>
  </footer>

  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>
