<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scrum Poker</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-top">
        <h1>üÉè Scrum Poker</h1>
        <button id="theme-toggle" class="btn btn-secondary theme-toggle" type="button" aria-label="Switch theme">Dark theme</button>
      </div>
      <p class="subtitle">Planning Poker for Agile Teams</p>
    </header>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen">
      <div class="card welcome-card">
        <h2>Welcome to Scrum Poker</h2>
        <p>Plan and estimate your stories together in real-time</p>
        
        <div class="form-group">
          <label for="user-name">Your Name</label>
          <input type="text" id="user-name" placeholder="Enter your name" required>
        </div>

        <div class="form-group">
          <label for="room-id">Room ID</label>
          <input type="text" id="room-id" placeholder="Enter room ID or leave blank to create">
        </div>

        <div class="form-group checkbox-group">
          <label>
            <input type="checkbox" id="is-observer">
            Join as Observer (won't vote)
          </label>
        </div>

        <button id="join-btn" class="btn btn-primary btn-large">Join Room</button>
        
        <div class="help-text">
          <p>üí° <strong>Tip:</strong> Share the Room ID with your team to collaborate</p>
        </div>
        <section class="help-section" aria-labelledby="help-title">
          <h3 id="help-title">How Scrum Poker helps your team</h3>
          <details>
            <summary>How to use the app</summary>
            <p>Join with your name, share the room ID, pick a card, then reveal together to discuss differences and align.</p>
          </details>
          <details>
            <summary>Purpose of Scrum Poker</summary>
            <p>It gives everyone an equal voice in effort discussions and helps teams find shared understanding before building.</p>
          </details>
          <details>
            <summary>Why Fibonacci numbers</summary>
            <p>Uncertainty grows with size. Fibonacci spacing (1, 2, 3, 5, 8, 13...) reflects that larger work is harder to estimate precisely.</p>
          </details>
          <details>
            <summary>Why estimate with story points</summary>
            <p>Story points measure relative complexity and risk instead of hours, making planning more consistent across different team members.</p>
          </details>
        </section>
      </div>
    </div>

    <!-- Voting Screen -->
    <div id="voting-screen" class="screen hidden">
      <div class="room-info">
        <div class="room-header">
          <div>
            <span class="label">Room ID:</span>
            <span id="current-room-id" class="room-id-display"></span>
            <button id="copy-room-id" class="btn btn-icon" title="Copy to clipboard">üìã</button>
          </div>
          <button id="leave-room" class="btn btn-secondary">Leave Room</button>
        </div>
      </div>

      <!-- Participants -->
      <div class="participants-section">
        <h3>Participants <span id="participant-count" class="count-badge">0</span></h3>
        <div id="participants-list" class="participants-list"></div>
      </div>

      <!-- Card Selection (only shown for non-observers) -->
      <div id="card-selection" class="card-selection">
        <h3>Select Your Card</h3>
        <div class="cards-container">
          <button class="card-button" data-value="0">0</button>
          <button class="card-button" data-value="0.5">¬Ω</button>
          <button class="card-button" data-value="1">1</button>
          <button class="card-button" data-value="2">2</button>
          <button class="card-button" data-value="3">3</button>
          <button class="card-button" data-value="5">5</button>
          <button class="card-button" data-value="8">8</button>
          <button class="card-button" data-value="13">13</button>
          <button class="card-button" data-value="21">21</button>
          <button class="card-button" data-value="34">34</button>
          <button class="card-button" data-value="55">55</button>
          <button class="card-button card-special" data-value="?">?</button>
          <button class="card-button card-special" data-value="‚òï">‚òï</button>
        </div>
      </div>

      <!-- Statistics (shown when revealed) -->
      <div id="statistics" class="statistics hidden">
        <h3><span aria-label="Statistics">üìä</span> Results</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <div class="stat-label">Average</div>
            <div class="stat-value" id="stat-avg">-</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Median</div>
            <div class="stat-value" id="stat-median">-</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Min</div>
            <div class="stat-value" id="stat-min">-</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Max</div>
            <div class="stat-value" id="stat-max">-</div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button id="reveal-btn" class="btn btn-primary">Reveal Cards</button>
        <button id="reset-btn" class="btn btn-secondary">New Round</button>
      </div>
    </div>
  </div>

  <footer>
    <p>Made with ‚ù§Ô∏è for Agile Teams</p>
  </footer>

  <script src="/socket.io/socket.io.js"></script>
  <script src="app.js"></script>
</body>
</html>
